---
title: "Projeto Crime Rio"
author: "Gabriela Alves"
date: "14/07/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Criminalidade no Rio de Janeiro
Este estudo tem como objetivo criar um ranking com base em dados sobre a 
criminalidade do Estado do Rio de Janeiro. 
A proposta de criação deste ranking se dá por meio da Análise Fatorial por 
Fatores Principais, uma técnica não supervisionada de machine learning que
utiliza variáveis quantitativas para criar fatores que são responsáveis por 
capturar a variância compartilhada entre as variáveis e estes fatores são
ortogonais entre si.
Esta base de dados contém 53 variáveis quantitativas e pode ser encontrada no 
seguinte link: https://www.ispdados.rj.gov.br:4432/estatistica.html. 
## Carregando os pacotes:

``` {r pacote, echo = FALSE, warning = FALSE,message = FALSE}

pacotes <- c("tidyverse","knitr","kableExtra","car","rgl","gridExtra",
             "PerformanceAnalytics","reshape2","rayshader","psych","pracma",
             "polynom","rqPen","ggrepel", "plotly","factoextra")

if(sum(as.numeric(!pacotes %in% installed.packages())) != 0){
  instalador <- pacotes[!pacotes %in% installed.packages()]
  for(i in 1:length(instalador)) {
    install.packages(instalador, dependencies = T)
    break()}
  sapply(pacotes, require, character = T)  
} else {
  sapply(pacotes, require, character = T) 
}

````
## Apresentando a base de dados
Ao todo esta base contem 92 observações e 54 variáveis, onde apenas a primeira, 
fmun_cod é qualitativa e representa o nome dos municípios do Estado do Rio de 
Janeiro. As restantes variáveis são todas quantitativas e representam diferentes
tipos de crimes. 
Para este estudo foi selecionado os dados de 2020, que originalmente são 
apresentados no formato mensal, no entanto para observar o ano e evitar a escolha
de um mês que possa ser atípico, esses dados mensais foram somados e por isso 
temos apenas 92 observações.

```{r dados,eval = TRUE, echo = FALSE}


dados <- read.csv2("BaseMunicipioMensal.csv")
dados <- dados %>%
  filter(ano == 2020) %>%
  select(-fmun_cod,-ano, -mes,-mes_ano, -regiao, -fase)
dados <- aggregate(.~fmun, data = dados, FUN= sum)

```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

https://www.geeksforgeeks.org/sum-of-rows-based-on-column-value-in-r-dataframe/
https://www.biostars.org/p/303219/
